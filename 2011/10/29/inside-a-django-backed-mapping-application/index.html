<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>

Inside a Django backed mapping application   | Eric van Zanten &#8211; Statically</title>

<link rel="stylesheet" href="http://www.static-eric.com/wp-content/themes/tabula-rosa/style.css" type="text/css" media="screen" />


<link rel="alternate" type="application/rss+xml" title="Eric van Zanten - Statically &raquo; Feed" href="http://www.static-eric.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Eric van Zanten - Statically &raquo; Comments Feed" href="http://www.static-eric.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Eric van Zanten - Statically &raquo; Inside a Django backed mapping application Comments Feed" href="http://www.static-eric.com/2011/10/29/inside-a-django-backed-mapping-application/feed/" />
<link rel='stylesheet' id='fancybox_css-css'  href='http://www.static-eric.com/wp-content/themes/tabula-rosa/js/fancybox/jquery.fancybox-1.3.4.css?ver=3.2.1' type='text/css' media='screen' />
<script type='text/javascript' src='http://www.static-eric.com/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-includes/js/jquery/jquery.js?ver=1.6.1'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-includes/js/comment-reply.js?ver=20090102'></script>

 
<link rel='index' title='Eric van Zanten &#8211; Statically' href='http://www.static-eric.com/' />
<link rel='start' title='OMG FREE HOSTING: An homage to Harper Reed' href='http://www.static-eric.com/2011/10/22/omg-free-hosting-an-homage-to-harper-reed/' />
<link rel='prev' title='Making search possible on a static site' href='http://www.static-eric.com/2011/10/27/making-search-possible-on-a-static-site/' />
<meta name="generator" content="WordPress 3.2.1 - Realstatic 0.31" />
<link rel='canonical' href='http://www.static-eric.com/2011/10/29/inside-a-django-backed-mapping-application/' />
<link rel='shortlink' href='http://www.static-eric.com/?p=52/' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3" />

<!-- BEGIN Typekit Fonts for WordPress -->
<script type="text/javascript" src="http://use.typekit.com/sok4ukf.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script><!-- END Typekit Fonts for WordPress -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26502031-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body class="single single-post postid-52 single-format-standard">
		
	<div id="header">
		<div id="header-wrapper">
		<h1 id="blog-title"><a href="http://www.static-eric.com/" title="Home">Eric van Zanten &#8211; Statically</a></h1>       
        <h2 id="blog-description"></h2>
        
        <!-- Design Note: Add breadcrumbs here at the end of this logic -->
        			<h2 class="breadcrumb"><a href="http://www.static-eric.com/">Home</a> - 
									<a href="http://www.static-eric.com/category/uncategorized/" title="Uncategorized">Uncategorized</a> - Inside a Django backed mapping application				</h2>
					</h2>
		</div>
	</div>

<div id="wrapper">
	<div id="left-col">
			<div id="menu">
		<ul>
						<li class="page_item"><a href="http://www.static-eric.com/">Home</a></li>
						<li class="page_item page-item-10"><a href="http://www.static-eric.com/about-this-site/" title="About this site">About this site</a></li>
		</ul>
	</div>


		<div id="sidebar">
        	<div id="feed-container">
        		<p><a href="http://feeds.feedburner.com/static-eric" id="feed_link">Subscribe to the RSS Feed</a></p>
        	</div>

						
			<div class="widget static-widget">
				<h3 class="widgettitle">Archives</h3>
				<ul>
						<li><a href='http://www.static-eric.com/2011/10/' title='October 2011'>October 2011</a></li>
				</ul>
			</div>
			
			<div class="widget static-widget">
				<h3 class="widgettitle">Categories</h3>
				<ul>
						<li class="cat-item cat-item-3"><a href="http://www.static-eric.com/category/code/" title="View all posts filed under Code">Code</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://www.static-eric.com/category/how-tos/" title="View all posts filed under How-Tos">How-Tos</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://www.static-eric.com/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
				</ul>
			</div>
			<div class="widget static-widget">
				<h3 class="widgettitle">Search</h3>
                <form id="searchform">
                <div><input type="text" name="s" id="s" /><input type="button" id="searchsubmit" value="Search" /></div>
                </form>
			</div>
			<div id="search-results"></div>
				</div>
	</div>

	<div id="right-col">
					<div id="post-52" class="post-52 post type-post status-publish format-standard hentry category-uncategorized">
						<h1 class="posttitle">Inside a Django backed mapping application</h1>
			<div class="post-author">written by: Eric</div>
	
			<div class="entry">
				<p>My introduction to Python,  and Django in particular, was a week-long project to setup, from scratch, a basic, working GeoDjango project. Thanks to some really <a title="GeoDjango" href="https://docs.djangoproject.com/en/1.3/ref/contrib/gis/" target="_blank">stellar documentation</a>, which has actually improved quite a bit since back in the day (like, a year and a half ago or whatever), I was able to do it. But, quite frankly, that was only the beginning. When I showed off my little application around the office, it ended up being a full fledged project, which I&#8217;m still tweaking to this day. This is an attempt to unravel some of what I&#8217;ve picked up during that time, especially given all of the recent developments in the web based mapping sphere.</p>
<p><strong>First, a slight divergence</strong></p>
<p>The main mapping application that I&#8217;ve worked on has been for the Bahá&#8217;í National Center, where I work. As I touched on a bit <a title="2010 Census: Leveraging what’s already been done" href="http://www.static-eric.com/2011/10/23/2010-census-leveraging-whats-already-been-done/" target="_blank">over here</a>, I&#8217;m kinda stuck having to deal with a whole bunch of custom geographies for the entire continental United States. The sheer scale of that can get a bit unwieldy and a lot of what I&#8217;ve spent my time doing is how to efficiently render huge amounts of shapes (and combinations of shapes) in all browsers. So, whereas I try to cover most of the bases here, the depth of my knowledge is limited by the focus that I&#8217;ve had.</p>
<p>An assumption I&#8217;m going to make throughout this post is that you&#8217;ve got a basic knowledge of how to get a GeoDjango project going and are running it in Ubuntu. I&#8217;ve tried this stuff on 10.04 and up so, you should be covered. In case you&#8217;re going to finish this paragraph and then go setup a project in a VM or something, here are a couple handy PPAs to help get current GIS libraries and PostgreSQL 9.0 without having to compile it from source. You can use <code>add-apt-repository</code> to add them and then just use <code>apt-get install [whatever]</code> to install your packages. Oh, heck, just copy and paste this (assumes you&#8217;re running it as root):</p>
<pre class="brush: bash; title: ; notranslate" title="">
apt-get install python-software-properties
add-apt-repository ppa:pitti/postgresql
add-apt-repository ppa:ubuntugis/ubuntugis-unstable
apt-get update
apt-get install libpq-dev postgresql-9.0 postgresql-server-dev-9.0 postgresql-contrib-9.0 \
proj libgeos-3.2.2 libgeos-c1 libgeos-dev libgdal1-1.8.0 libgdal1-dev gdal-bin
wget http://postgis.refractions.net/download/postgis-1.5.3.tar.gz
tar -xvf postgis-1.5.3.tar.gz
cd postgis-1.5.3
./configure
make
make install
</pre>
<p>That puts the <code>sql</code> files you need to make the geospatially configured database template in <code>/usr/share/postgresql/9.0/contrib/postgis-1.5</code>. This is what you make <a title="Geospatially aware database template - GeoDjango" href="https://docs.djangoproject.com/en/1.3/ref/contrib/gis/install/#spatialdb-template" target="_blank">on this part</a> of the GeoDjango tutorial. Note that the package names include version numbers in some cases so if the PPAs get updated to the latest version of one of those packages, you&#8217;ll need to update that stuff accordingly. Another thing that you might need to define is the <code>GDAL_LIBRARY_PATH</code> in the <code>settings.py</code> of your Django project. After following the instructions above, mine was here: <code>/usr/lib/libgdal1.8.0.so</code> .</p>
<p><strong>Getting right to it</strong></p>
<p>Once you&#8217;ve gotten your Django project setup (either using the fancy newer libraries that are detailed above or whatever works), what&#8217;s next? I mean, what&#8217;s the big deal, right? Well, in my opinion, a good map is one that tells you what&#8217;s going on around you and has the capability of scaling to give you a greater context if you feel like you need it.</p>
								
			</div>
	
			<div class="post-metadata alt">
				<p><strong>Date:</strong> <a href="http://www.static-eric.com/2011/10/29/inside-a-django-backed-mapping-application/" rel="bookmark" title="Permanent Link to Inside a Django backed mapping application">October 29th, 2011</a> </p>
				<p><strong>Category:</strong> <a href="http://www.static-eric.com/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></p>
								<p><strong>Comments/Trackbacks:</strong>
								<a href="#respond">Comments</a>, or <a href="http://www.static-eric.com/2011/10/29/inside-a-django-backed-mapping-application/trackback/" rel="trackback">trackback</a> allowed.</p>
	
								</p>
			</div>
	
<div id="disqus_thread">
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://www.static-eric.com/2011/10/29/inside-a-django-backed-mapping-application/';
    var disqus_identifier = '52 http://www.static-eric.com/?p=52';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'static-eric';
    var disqus_title = "Inside a Django backed mapping application";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /* 
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=52');
        });
                    };
    var facebookXdReceiverPath = 'http://www.static-eric.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/static\/wordpress\/2011\/10\/29\/inside-a-django-backed-mapping-application\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.67';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>
	</div>		
</div>

	<div id="footer">
		<p>&copy; 2010 Eric van Zanten &#8211; Statically | Powered by <a href="http://www.sorben.org/really-static/">really static WordPress</a> | Theme: <a href="http://leonewball.com/portfolio/tabula-rosa/">tabula rosa</a> | <a href="http://www.static-eric.com/feed/">RSS Feed</a></p>
	</div>

<script type='text/javascript' src='http://www.static-eric.com/wp-content/themes/tabula-rosa/js/menuslide.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-content/themes/tabula-rosa/js/togglewidgets.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-content/themes/tabula-rosa/js/fancybox/jquery.fancybox-1.3.4.js?ver=1.3.4'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-content/themes/tabula-rosa/js/fancybox_settings.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83c'></script>
<script type='text/javascript' src='http://www.static-eric.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.83c'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.static-eric.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83c";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.static-eric.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83c";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="http://www.static-eric.com/wp-content/themes/tabula-rosa/js/search.js"></script>
</body>
</html>
